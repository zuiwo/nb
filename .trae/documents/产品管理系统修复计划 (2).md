# 产品管理系统修复计划

## 1. 问题分析

### 1.1 后端问题
- **API路径大小写问题**：当前使用大写API，需要改为小写api
- **SQL扫描错误**：getProducts函数返回"Failed to scan product"，可能是字段类型不匹配或缺少字段

### 1.2 前端问题
- **获取产品列表失败**：前端调用API返回500错误
- **页面刷新加载时显示无样式HTML**：需要添加加载状态

### 1.3 好消息
- **新增产品成功**：数据库成功添加数据，createProduct函数基本正常

## 2. 修复计划

### 2.1 修复后端API路径大小写

#### 2.1.1 修改后端路由前缀
- 修改`d:\code\nb2\backend\cmd\main.go`
- 将产品路由组前缀从`/API/products`改为`/api/products`

#### 2.1.2 修复SQL扫描错误
- 检查`getProducts`函数的SQL查询和结构体扫描
- 确保所有字段类型匹配
- 检查是否缺少字段

### 2.2 修复前端问题

#### 2.2.1 更新前端API调用路径
- 修改`d:\code\nb2\frontend\lib\services\productService.ts`
- 将API_BASE_URL中的大写API改为小写api

#### 2.2.2 添加页面加载状态
- 在产品列表页添加加载状态
- 使用Antd的Spin组件或Skeleton组件
- 确保页面加载时显示加载状态，而不是无样式HTML

## 3. 修复步骤

1. **修复后端API路径大小写**：
   - 修改`d:\code\nb2\backend\cmd\main.go`中的路由定义
   - 将`/API/products`改为`/api/products`
   - 重启后端服务

2. **修复SQL扫描错误**：
   - 检查`getProducts`函数的SQL查询和结构体扫描
   - 确保所有字段类型匹配
   - 修复扫描错误

3. **更新前端API调用路径**：
   - 修改`d:\code\nb2\frontend\lib\services\productService.ts`
   - 将API_BASE_URL中的大写API改为小写api

4. **添加页面加载状态**：
   - 修改产品列表页，添加加载状态
   - 使用Antd的Spin组件包裹内容

## 4. 预期效果

- 产品列表能够正常获取和显示
- API路径使用小写api
- 页面刷新时显示加载状态，而不是无样式HTML
- 新增产品功能正常

## 5. 技术要点

- Go语言SQL查询和结构体扫描
- Next.js加载状态管理
- Antd组件使用
- API路径大小写规范

现在我将开始执行修复计划，首先修复后端API路径大小写问题。