# 产品管理系统修复计划

## 1. 问题分析

### 1.1 后端问题
- **获取产品列表失败**：报错"Failed to scan product"，这是SQL查询结果扫描到Go结构体时的错误
- **接口路径需要添加API前缀**：当前路径是`/products`，需要改为`/API/products`
- **数据库连接或查询问题**：可能是字段类型不匹配或缺少字段

### 1.2 前端问题
- **页面刷新加载时显示无样式HTML**：可能是Next.js的客户端渲染问题
- **新建产品失败**：前端调用API失败，可能是后端接口问题

### 1.3 文档需求
- **接口文档需要放到md文件中**：当前是聊天区域，需要创建单独的md文件

## 2. 修复计划

### 2.1 修复后端API路径

#### 2.1.1 修改后端路由前缀
- 修改`d:\code\nb2\backend\cmd\main.go`
- 将产品路由组前缀从`/products`改为`/API/products`
- 同样修改其他路由组

#### 2.1.2 修复SQL扫描错误
- 检查产品模型的字段定义
- 确保SQL查询的字段与Go结构体字段完全匹配
- 检查字段类型是否正确

### 2.2 修复前端API调用

#### 2.2.1 更新前端API_BASE_URL
- 修改`d:\code\nb2\frontend\lib\services\productService.ts`
- 确保API调用路径包含`/API`前缀

#### 2.2.2 处理页面加载样式问题
- 检查Next.js的渲染模式
- 确保CSS正确加载
- 考虑使用服务器组件或优化客户端渲染

### 2.3 创建接口文档文件

#### 2.3.1 创建API文档md文件
- 在项目根目录创建`API文档.md`文件
- 整理所有API接口信息

## 3. 修复步骤

1. **修复后端路由前缀**：
   - 修改`d:\code\nb2\backend\cmd\main.go`中的路由定义
   - 将所有路由前缀添加`/API`

2. **修复SQL扫描错误**：
   - 检查产品模型和SQL查询
   - 确保字段类型匹配

3. **更新前端API调用**：
   - 修改`d:\code\nb2\frontend\lib\services\productService.ts`
   - 确保API路径正确

4. **创建接口文档**：
   - 创建`API文档.md`文件
   - 整理所有API接口信息

5. **处理页面加载样式问题**：
   - 检查Next.js配置
   - 优化CSS加载

## 4. 预期效果

- 产品列表能够正常获取和显示
- 新建产品功能正常工作
- 所有API接口路径包含`/API`前缀
- 页面加载时直接显示最终样式
- 接口文档存放在单独的md文件中

## 5. 技术要点

- Go语言SQL查询和结构体扫描
- Next.js路由和渲染优化
- API设计和文档编写
- 前后端接口对接

现在我将开始执行修复计划，首先修复后端路由前缀问题。